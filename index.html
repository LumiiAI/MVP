<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lumii AI - Clickable Wireframes (Full Flow)</title>
  <meta name="viewport" content="width=375, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    html, body {
      background: #f5f7fa;
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      overflow-x: hidden;
    }
    body {
      min-height: 100vh;
      font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .container {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      border: 2.5px solid #e2e8f0;
      width: 100%;
      max-width: 410px;
      min-height: 640px;
      margin: 24px auto 24px auto;
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    @media (max-width: 430px) {
      .container {
        margin: 0;
        border-radius: 0;
        min-height: 100vh;
        max-width: 100vw;
      }
    }
    .screen {
      width: 100%;
      min-height: 640px;
      display: none;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
      background: #fff;
      position: relative;
    }
    .screen.active { display: flex; }
    .screen-title {
      font-weight: bold;
      font-size: 22px;
      color: #2d3748;
      margin-bottom: 12px;
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 2px solid #e2e8f0;
      background: #fff;
      border-radius: 0 0 15px 15px;
      margin-top: 0;
    }
    .content-area {
      flex: 1;
      overflow-y: auto;
      padding: 16px 14px 12px 14px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      position: relative;
      min-height: 0;
      margin-bottom: 72px;
      box-sizing: border-box;
    }
    .btn, button.btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 13px 0;
      border-radius: 8px;
      font-size: 17px;
      font-weight: bold;
      margin: 10px 0;
      width: 100%;
      cursor: pointer;
      transition: background .16s;
    }
    .btn:active, .btn:focus { background: #4e47c5; }
    .btn-secondary {
      background: #e2e8f0 !important;
      color: #4a5568 !important;
      border: 2px solid #cbd5e0;
    }
    .input-field {
      width: 100%; 
      padding: 12px;
      border: 2px solid #e2e8f0;
      border-radius: 8px; 
      margin: 2px 0 14px 0; 
      font-size: 17px;
      background: #fff;
      box-sizing: border-box;
      display: block;
      outline: none;
    }
    .input-field:focus { outline: 2px solid #667eea; }
    .input-label {
      font-size: 16px;
      margin-bottom: 3px;
      color: #2d3748;
      font-weight: 500;
      display: block;
      text-align: left;
      margin-left: 2px;
    }
    /* Avatar grid */
    .avatar-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 14px; margin: 20px 0; }
    .avatar-option {
      text-align: center; padding: 10px 4px;
      border-radius: 12px; border: 2px solid #e2e8f0;
      background: #f7fafc; cursor: pointer;
      transition: border .2s, background .2s;
      user-select: none;
    }
    .avatar-option.selected { border-color: #667eea; background: #edf2f7;}
    .avatar-circle { width: 48px; height: 48px; border-radius: 50%; background: #fff; border: 2px solid #e2e8f0; display: flex; align-items: center; justify-content: center; font-size: 27px; margin: 0 auto 8px; }
    .avatar-name { font-size: 14px; font-weight: bold; color: #4a5568;}
    /* Nav */
    .bottom-nav {
      position: absolute;
      left: 12px; right: 12px; bottom: 10px;
      height: 56px;
      background: #f7fafc;
      border-radius: 15px;
      border: 2px solid #e2e8f0;
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 10;
      max-width: 386px;
      margin: 0 auto;
    }
    .nav-item {
      width: 50px; height: 40px;
      background: #e2e8f0;
      border-radius: 8px;
      border: 1px solid #cbd5e0;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      font-size: 13px; color: #4a5568; cursor: pointer;
      user-select: none;
      margin: 0 2px;
    }
    .nav-item.active { background: #667eea; color: white; }
    /* Floating avatar */
    .floating-avatar {
      position: absolute;
      right: 18px;
      bottom: 76px;
      width: 54px; height: 54px; border-radius: 50%;
      background: #fff;
      box-shadow: 0 4px 16px rgba(0,0,0,0.13);
      display: flex; align-items: center; justify-content: center;
      font-size: 30px;
      border: 3px solid #667eea;
      cursor: pointer;
      z-index: 200;
      transition: opacity .2s;
    }
    .floating-avatar.hide { display: none !important;}
    .mood-selector { display: flex; justify-content: space-between; margin: 18px 0;}
    .mood-option {
      width: 40px; height: 40px; border-radius: 50%; border: 2px solid #e2e8f0;
      background: #f7fafc; display: flex; align-items: center; justify-content: center;
      font-size: 20px; cursor: pointer; transition: border .12s;
    }
    .mood-option.selected { border-color: #667eea; background: #edf2f7;}
    .lumii-logo-main {
      width: 110px; height: 110px;
      margin: 0 auto 20px auto;
      border-radius: 50%;
      font-size: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      font-weight: 700;
      letter-spacing: 2px;
      border: 5px solid #ebe7fc;
      box-shadow: 0 6px 20px #764ba233;
    }
    .hide { display: none !important; }
    .card {
      background: #f7fafc;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 14px 15px;
      margin-bottom: 18px;
      max-width: 100%;
      box-sizing: border-box;
    }
    ul { margin: 0; padding-left: 22px; }
    .card-title { font-weight: 600; margin-bottom: 7px; font-size: 17px;}
    .parent-section-title {
      color: #4a5568;
      font-weight: bold;
      font-size: 18px;
      margin: 16px 0 8px 0;
      text-align: left;
    }
    .parent-card {
      background: #f2eafc;
      border: 2px solid #d6bcfa;
      border-radius: 12px;
      padding: 12px 14px;
      margin-bottom: 12px;
      font-size: 15px;
      color: #44337a;
      cursor: pointer;
      transition: background 0.15s;
    }
    .parent-card:hover { background: #e9d8fd; }
    .parent-btn-row {
      display: flex;
      gap: 8px;
      margin-top: 14px;
      justify-content: center;
    }
    .parent-link {
      color: #667eea;
      text-decoration: underline;
      cursor: pointer;
      font-size: 15px;
      margin-left: 2px;
    }
    .parent-detail-section {
      background: #f7fafc;
      border: 2px solid #b2f5ea;
      border-radius: 10px;
      padding: 12px 13px;
      margin-bottom: 14px;
      font-size: 15px;
      color: #234e52;
    }
    .parent-detail-title {
      font-weight: bold;
      color: #285e61;
      margin-bottom: 7px;
    }
    .wellbeing-companion {
      background: #e6fffa;
      border: 2px solid #4fd1c7;
      border-radius: 16px;
      padding: 16px;
      text-align: center;
      margin-bottom: 18px;
      color: #285e61;
    }
    .companion-avatar {
      font-size: 48px;
      margin-bottom: 12px;
    }
    .companion-btn-row {
      display: flex;
      gap: 7px;
      margin-top: 12px;
      justify-content: center;
    }
    .upload-options-grid {
      display: flex;
      gap: 14px;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      margin: 24px 0;
    }
    .upload-option-btn {
      background: #e2e8f0;
      color: #4a5568;
      border: 2px solid #cbd5e0;
      border-radius: 14px;
      padding: 18px 22px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 8px;
      width: 135px;
      transition: background 0.13s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .upload-option-btn:active {
      background: #667eea;
      color: #fff;
      border-color: #667eea;
    }
    .flag-match-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
    }
    .flag-row, .country-row {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-bottom: 6px;
    }
    .flag-btn, .country-btn {
      background: #e2e8f0;
      color: #2d3748;
      border: 2px solid #cbd5e0;
      border-radius: 10px;
      padding: 13px 10px;
      font-size: 26px;
      cursor: pointer;
      min-width: 54px;
      min-height: 54px;
      transition: background .12s;
    }
    .flag-btn.selected, .country-btn.selected {
      background: #667eea;
      color: #fff;
      border-color: #667eea;
    }
    .flag-match-title {
      font-size: 19px;
      font-weight: bold;
      margin-bottom: 12px;
      color: #2d3748;
    }
    .flag-match-result {
      font-size: 17px;
      font-weight: bold;
      margin-top: 8px;
      min-height: 24px;
      color: #22543d;
    }
    @media (max-width: 430px) {
      .container { border-radius:0; }
      .card { padding: 11px 6px 12px 6px; }
      .bottom-nav { left: 2vw; right: 2vw; }
      .content-area { padding: 14px 2vw 10px 2vw;}
      .floating-avatar { right:8px; }
      .upload-options-grid { gap: 8px;}
    }
  </style>
</head>
<body>
<div class="container">

  <!-- 1. Role Selector -->
  <div id="screen-role" class="screen active">
    <div class="screen-title">Who is using Lumii?</div>
    <div class="content-area" style="flex:1;justify-content:center;align-items:center;display:flex;">
      <button class="btn" id="btn-parent">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ I'm a Parent</button>
      <button class="btn" id="btn-kid">üßí I'm a Kid</button>
    </div>
  </div>

  <!-- 2. Parent Dashboard (Expanded & Clickable) -->
  <div id="screen-parent" class="screen">
    <div class="screen-title">Parent Dashboard</div>
    <div class="content-area">
      <div class="card parent-card" onclick="showScreen('screen-parent-progress')">
        <div class="card-title">Weekly Progress</div>
        <div>[Chart and overview]</div>
      </div>
      <div class="card parent-card" onclick="showScreen('screen-parent-learning')">
        <div class="card-title">Learning Suggestions</div>
        <ul>
          <li>Review multiplication tables</li>
          <li>Encourage daily reading</li>
          <li>Check homework completion</li>
        </ul>
      </div>
      <div class="card parent-card" onclick="showScreen('screen-parent-wellbeing')">
        <div class="card-title">Wellbeing Suggestions</div>
        <ul>
          <li>Ask how they're feeling after school</li>
          <li>Practice a 2-min breathing break together</li>
          <li>Discuss their favourite part of the day</li>
        </ul>
      </div>
      <div class="card parent-card" onclick="showScreen('screen-parent-dates')">
        <div class="card-title">Important Dates</div>
        <ul>
          <li>Math Test: June 21</li>
          <li>Science Project Due: June 28</li>
          <li>School Trip: July 3</li>
        </ul>
      </div>
      <div class="parent-section-title">Messages</div>
      <div class="parent-card" onclick="showScreen('screen-parent-messages')">
        <b>From Lumii AI:</b><br>
        Your child showed improvement in multiplication! Encourage them to keep practicing.
      </div>
      <div class="parent-section-title">Resources</div>
      <div class="parent-card" onclick="showScreen('screen-parent-resources')">
        <div>üîó <span class="parent-link">Free Storybooks</span></div>
        <div>üîó <span class="parent-link">Find Live Tutor</span></div>
      </div>
      <div class="parent-btn-row">
        <button class="btn" style="width:48%;" id="btn-upload-parent">Upload Materials</button>
        <button class="btn btn-secondary" style="width:48%;" onclick="showScreen('screen-role')">Back</button>
      </div>
    </div>
  </div>

  <!-- Parent Details Screens -->
  <div id="screen-parent-progress" class="screen">
    <div class="screen-title">Weekly Progress</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <div class="parent-detail-title">Math</div>
        <div>Excellent progress in multiplication and fractions. Needs more focus on word problems.</div>
      </div>
      <div class="parent-detail-section">
        <div class="parent-detail-title">Spelling</div>
        <div>Consistently completes spelling quizzes with high accuracy.</div>
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>
  <div id="screen-parent-learning" class="screen">
    <div class="screen-title">Learning Suggestions</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <ul>
          <li>Practice times tables (6-9)</li>
          <li>Read for 15 minutes daily</li>
          <li>Discuss today's lesson topics at dinner</li>
        </ul>
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>
  <div id="screen-parent-wellbeing" class="screen">
    <div class="screen-title">Wellbeing Suggestions</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <ul>
          <li>Ask about their favourite part of the day</li>
          <li>Spend 2 minutes doing slow breathing together</li>
          <li>Notice if your child seems tired or frustrated</li>
        </ul>
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>
  <div id="screen-parent-dates" class="screen">
    <div class="screen-title">Important Dates</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <ul>
          <li>Math Test: June 21 (practice review June 19)</li>
          <li>Science Project Due: June 28 (plan together June 23)</li>
          <li>School Trip: July 3 (return permission slip by June 25)</li>
        </ul>
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>
  <div id="screen-parent-messages" class="screen">
    <div class="screen-title">Messages from Lumii AI</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <div class="parent-detail-title">Progress Update</div>
        Your child is showing more focus in math. Encourage regular breaks and positive feedback!
      </div>
      <div class="parent-detail-section">
        <div class="parent-detail-title">Wellbeing Check</div>
        Your child reported feeling "üòä" today. Great job supporting their wellbeing!
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>
  <div id="screen-parent-resources" class="screen">
    <div class="screen-title">Parent Resources</div>
    <div class="content-area">
      <div class="parent-detail-section">
        <div>üîó <a href="https://www.storyberries.com/" target="_blank" style="color:#667eea;">Free Storybooks</a></div>
        <div>üîó <a href="https://preply.com/en/" target="_blank" style="color:#667eea;">Find Live Tutor</a></div>
      </div>
      <div class="parent-btn-row">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>

  <!-- Parent Upload Page -->
  <div id="screen-parent-upload" class="screen">
    <div class="screen-title">Upload Materials</div>
    <div class="content-area" style="align-items:center;justify-content:center;flex:1;">
      <div class="flag-match-title" style="margin-bottom:22px;">Choose how to upload:</div>
      <div class="upload-options-grid">
        <button class="upload-option-btn" onclick="alert('Camera not connected in prototype!')">
          <span style="font-size:32px;">üì∑</span>
          <span>Take Photo</span>
        </button>
        <button class="upload-option-btn" onclick="alert('File picker not enabled in prototype!')">
          <span style="font-size:32px;">üóÇÔ∏è</span>
          <span>Upload from Computer/Phone</span>
        </button>
      </div>
      <div class="parent-btn-row" style="margin-top:18px;">
        <button class="btn btn-secondary" onclick="showScreen('screen-parent')">Back</button>
      </div>
    </div>
  </div>

  <!-- 3. Kid Welcome -->
  <div id="screen-kid-welcome" class="screen">
    <div class="content-area" style="align-items:center;justify-content:center;flex:1;">
      <div class="lumii-logo-main">Lumii</div>
      <h2 style="color:#2d3748;margin-bottom:12px;text-align:center;">Welcome to Lumii!</h2>
      <div style="color:#718096;font-size:14px;margin-bottom:36px;text-align:center;">Your AI learning companion</div>
      <button class="btn" id="btn-to-onboarding">Get Started</button>
      <button class="btn btn-secondary" onclick="showScreen('screen-role')">Back</button>
    </div>
  </div>

  <!-- 4. Kid Onboarding: Name/Grade -->
  <div id="screen-kid-onboarding" class="screen">
    <div class="screen-title">Let's get to know you!</div>
    <div class="content-area" style="align-items:center;justify-content:center;flex:1;">
      <label class="input-label" for="input-name">What's your name?</label>
      <input type="text" class="input-field" id="input-name" placeholder="Enter your name" autocomplete="off">
      <label class="input-label" for="input-grade">What grade are you in?</label>
      <select class="input-field" id="input-grade">
        <option value="">Select grade level</option>
        <option>Kindergarten</option>
        <option>Year 1</option>
        <option>Year 2</option>
        <option>Year 3</option>
        <option>Year 4</option>
        <option>Year 5</option>
        <option>Year 6</option>
        <option>Year 7</option>
        <option>Year 8</option>
        <option>Year 9</option>
      </select>
      <button class="btn" id="btn-next-onboarding">Next: Choose Avatar</button>
      <button class="btn btn-secondary" onclick="showScreen('screen-kid-welcome')">Back</button>
    </div>
  </div>

  <!-- 5. Kid Avatar Selection -->
  <div id="screen-kid-avatar" class="screen">
    <div class="screen-title">Choose Your Avatar</div>
    <div class="content-area">
      <div style="text-align:center;margin:20px 0;">
        <h2 style="color:#2d3748;margin-bottom:10px;">Pick your learning buddy!</h2>
        <p style="color:#718096;font-size:12px;margin-bottom:20px;">You can change this anytime</p>
      </div>
      <div class="avatar-grid" id="avatar-grid">
        <div class="avatar-option selected" data-avatar="Hero"><div class="avatar-circle">ü¶∏‚Äç‚ôÄÔ∏è</div><div class="avatar-name">Hero</div></div>
        <div class="avatar-option" data-avatar="Kitty"><div class="avatar-circle">üê±</div><div class="avatar-name">Kitty</div></div>
        <div class="avatar-option" data-avatar="Space"><div class="avatar-circle">üöÄ</div><div class="avatar-name">Space</div></div>
        <div class="avatar-option" data-avatar="Rainbow"><div class="avatar-circle">üåà</div><div class="avatar-name">Rainbow</div></div>
        <div class="avatar-option" data-avatar="Unicorn"><div class="avatar-circle">ü¶Ñ</div><div class="avatar-name">Unicorn</div></div>
        <div class="avatar-option" data-avatar="Dragon"><div class="avatar-circle">üêâ</div><div class="avatar-name">Dragon</div></div>
      </div>
      <div class="card" id="avatar-preview" style="background:#e6fffa;border-color:#4fd1c7;text-align:center;">
        <div style="font-size:40px;margin-bottom:10px;" id="avatar-emoji">ü¶∏‚Äç‚ôÄÔ∏è</div>
        <div style="font-weight:bold;color:#2c7a7b;" id="avatar-label">You chose Hero!</div>
      </div>
      <button class="btn" id="btn-avatar-next">Let's Start Learning!</button>
      <button class="btn btn-secondary" onclick="showScreen('screen-kid-onboarding')">Back</button>
    </div>
  </div>

  <!-- 6. Kid Home Dashboard -->
  <div id="screen-kid-home" class="screen">
    <div class="screen-title">Home</div>
    <div class="content-area">
      <div class="card" style="background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;">
        <div>
          <div style="font-weight:bold;margin-bottom:5px;">Today's Goal</div>
          <div style="font-size:12px;opacity:.9;">Complete 3 lessons</div>
        </div>
        <div style="font-size:22px;">üéØ</div>
      </div>
      <div class="card">
        <div class="card-title">Quick Actions</div>
        <button class="btn" id="btn-assessment">üß† Take Assessment</button>
        <button class="btn btn-secondary" id="btn-chat">üí¨ Chat (coming soon)</button>
      </div>
      <div class="card">
        <div class="card-title">Subjects</div>
        <div style="display:flex;gap:12px;">
          <div class="btn btn-secondary subject-btn" data-subject="math">Math</div>
          <div class="btn btn-secondary subject-btn" data-subject="geography">Geography</div>
          <div class="btn btn-secondary subject-btn" data-subject="spelling">Spelling</div>
          <div class="btn btn-secondary subject-btn" data-subject="wellbeing">Wellbeing</div>
        </div>
      </div>
      <div class="card">
        <div class="card-title">Weekly Plan</div>
        <ul>
          <li>Mon: Math, Spelling, Mindful Moments</li>
          <li>Tue: Geography, Math, Breathing Exercise</li>
          <li>Wed: Science, Reading, Wellbeing check</li>
          <li>Thu: Math Review, Art, Mindfulness</li>
          <li>Fri: Fun Quiz, Show & Tell, Celebration!</li>
        </ul>
      </div>
      <div class="wellbeing-companion" onclick="showScreen('screen-wellbeing-companion')" style="cursor:pointer;">
        <div class="companion-avatar">üå∏</div>
        <div><b>Meet your Wellbeing Companion!</b><br>
        Tap here anytime for a positive break, encouragement, or tips for feeling your best.</div>
      </div>
    </div>
    <div class="bottom-nav">
      <div class="nav-item active" onclick="showScreen('screen-kid-home')">Home</div>
      <div class="nav-item" onclick="showScreen('screen-kid-tutor')">Learn</div>
      <div class="nav-item" onclick="showScreen('screen-kid-wellbeing')">Wellbeing</div>
      <div class="nav-item" onclick="showScreen('screen-kid-gap')">Progress</div>
    </div>
    <div id="floating-avatar" class="floating-avatar" title="Need a break?">ü¶∏‚Äç‚ôÄÔ∏è</div>
  </div>

  <!-- 6c. Geography Mini-Game -->
  <div id="screen-geography-flags" class="screen">
    <div class="screen-title">Geography: Match the Flags</div>
    <div class="content-area">
      <div class="flag-match-title">Can you match the flags to the right countries?</div>
      <div class="flag-match-container">
        <div class="flag-row" id="flag-row">
          <!-- Flags will be dynamically rendered -->
        </div>
        <div class="country-row" id="country-row">
          <!-- Countries will be dynamically rendered -->
        </div>
        <button class="btn" id="btn-submit-flags" style="max-width:200px;margin-top:8px;">Submit</button>
        <div class="flag-match-result" id="flag-match-result"></div>
        <button class="btn btn-secondary" style="max-width:200px;" onclick="showScreen('screen-kid-home')">Back</button>
      </div>
    </div>
  </div>

  <!-- 6b. Wellbeing Companion Modal -->
  <div id="screen-wellbeing-companion" class="screen">
    <div class="screen-title">üå∏ Wellbeing Companion</div>
    <div class="content-area" style="align-items:center;justify-content:center;flex:1;">
      <div class="companion-avatar">üå∏</div>
      <div style="font-size:18px;font-weight:bold;margin-bottom:8px;">Hi, I'm your Wellbeing Buddy!</div>
      <div style="margin-bottom:12px;">I'm here if you ever want to:</div>
      <ul style="font-size:16px;margin-bottom:16px;text-align:left;">
        <li>Take a calming breathing break</li>
        <li>Get encouragement and positive messages</li>
        <li>Check in about your mood</li>
        <li>Try a quick stretch or mindfulness activity</li>
      </ul>
      <div class="companion-btn-row">
        <button class="btn" style="width:45%;" onclick="showScreen('screen-kid-breathing')">üå¨Ô∏è Breathe</button>
        <button class="btn btn-secondary" style="width:45%;" onclick="alert('You are awesome! Keep going! üòä')">üíå Encourage Me</button>
      </div>
      <button class="btn btn-secondary" style="margin-top:18px;" onclick="showScreen('screen-kid-home')">Back to Home</button>
    </div>
  </div>

  <!-- 7. Gap Analysis -->
  <div id="screen-kid-gap" class="screen">
    <div class="screen-title">üìä Gap Analysis</div>
    <div class="content-area">
      <div class="card">
        <div style="font-weight:bold;margin-bottom:10px;">Assessment Results</div>
        <div>Fractions: Needs Work<br>Multiplication: Improving<br>Addition: Strong</div>
      </div>
      <div class="card">
        <div class="card-title">Recommended Focus</div>
        <ul>
          <li>Fractions Basics: Start with simple fractions</li>
          <li>Times Tables: Practice 6-9 multiplication</li>
        </ul>
      </div>
      <button class="btn" id="btn-start-learning-path">Start Learning Path</button>
    </div>
    <div class="bottom-nav">
      <div class="nav-item" onclick="showScreen('screen-kid-home')">Home</div>
      <div class="nav-item" onclick="showScreen('screen-kid-tutor')">Learn</div>
      <div class="nav-item" onclick="showScreen('screen-kid-wellbeing')">Wellbeing</div>
      <div class="nav-item active" onclick="showScreen('screen-kid-gap')">Progress</div>
    </div>
    <div id="floating-avatar-gap" class="floating-avatar" title="Need a break?">ü¶∏‚Äç‚ôÄÔ∏è</div>
  </div>

  <!-- 8. AI Tutor -->
  <div id="screen-kid-tutor" class="screen">
    <div class="screen-title">ü§ñ AI Tutor - Math</div>
    <div class="content-area">
      <div class="card">
        <div><b>Lumii AI:</b> Let's work on fractions today! What is 1/2 + 1/4?</div>
      </div>
      <div class="card">
        <div><b>You:</b> I think it's 2/6?</div>
      </div>
      <div class="card">
        <div><b>Lumii AI:</b> Good try! Let me show you another way.<br>üçï What if we had 4 equal pizza slices?</div>
      </div>
      <div class="card" style="background:#fef5e7;">
        <div><b>Lumii AI:</b> Let's take a breathing break?</div>
        <button class="btn" id="btn-breathe-from-tutor" style="background:#48bb78;margin-top:10px;">Yes, let's breathe!</button>
        <button class="btn btn-secondary" style="margin-top:5px;" onclick="showScreen('screen-kid-tutor')">Keep trying</button>
      </div>
    </div>
    <div class="bottom-nav">
      <div class="nav-item" onclick="showScreen('screen-kid-home')">Home</div>
      <div class="nav-item active" onclick="showScreen('screen-kid-tutor')">Learn</div>
      <div class="nav-item" onclick="showScreen('screen-kid-wellbeing')">Wellbeing</div>
      <div class="nav-item" onclick="showScreen('screen-kid-gap')">Progress</div>
    </div>
    <div id="floating-avatar-tutor" class="floating-avatar" title="Need a break?">ü¶∏‚Äç‚ôÄÔ∏è</div>
  </div>

  <!-- 9. Spelling Game (Hangman) -->
  <div id="screen-kid-spelling" class="screen">
    <div class="screen-title">Spelling Game</div>
    <div class="content-area" style="text-align:center;">
      <div style="font-size:18px;color:#667eea;margin-bottom:10px;font-weight:bold;">Guess the word!</div>
      <div id="hangman-visual" style="font-family:monospace;font-size:18px;min-height:70px;"></div>
      <div id="hangman-word" style="margin-bottom:12px;font-size:28px;"></div>
      <div id="hangman-letters"></div>
      <div id="hangman-message" style="margin-top:10px;"></div>
      <button class="btn" onclick="startHangman()" style="margin-top:14px;">Restart</button>
      <button class="btn btn-secondary" onclick="showScreen('screen-kid-home')" style="margin-top:10px;">Back</button>
    </div>
  </div>

  <!-- 10. Wellbeing Check-in -->
  <div id="screen-kid-wellbeing" class="screen">
    <div class="screen-title">üíô Wellbeing Check-in</div>
    <div class="content-area">
      <div class="card" style="text-align:center;">
        <div style="font-weight:bold;margin-bottom:15px;">How are you feeling today?</div>
        <div class="mood-selector" id="mood-selector">
          <div class="mood-option">üò¢</div>
          <div class="mood-option">üòï</div>
          <div class="mood-option selected">üòä</div>
          <div class="mood-option">üòÑ</div>
          <div class="mood-option">ü§©</div>
        </div>
        <div style="font-size:10px;color:#718096;margin-top:10px;">Tap to select your mood</div>
      </div>
      <div class="card">
        <div style="font-weight:bold;margin-bottom:10px;">Energy Level</div>
        <div style="width:100%;background:#e2e8f0;height:8px;border-radius:4px;margin-top:10px;">
          <div style="width:75%;height:100%;background:#ed8936;border-radius:4px;"></div>
        </div>
        <div style="display:flex;justify-content:space-between;font-size:12px;color:#718096;margin-top:5px;">
          <span>Low</span><span>High</span>
        </div>
      </div>
      <div class="card">
        <div style="font-weight:bold;margin-bottom:10px;">How was school today?</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
          <button class="btn btn-secondary" style="padding:8px;font-size:13px;">üòä Great</button>
          <button class="btn btn-secondary" style="padding:8px;font-size:13px;">üòê Okay</button>
          <button class="btn" style="padding:8px;font-size:13px;">üòü Tough</button>
          <button class="btn btn-secondary" style="padding:8px;font-size:13px;">üò¥ Boring</button>
        </div>
      </div>
      <div class="card" style="background:#e6fffa;border-color:#4fd1c7;">
        <div style="text-align:center;">
          <div style="font-weight:bold;margin-bottom:5px;">üå∏ Take a Breathing Break</div>
          <div style="font-size:10px;color:#2c7a7b;margin-bottom:10px;">Let's do some calm breathing together</div>
          <button class="btn" id="btn-breathing-break" style="background:#319795;">Start 2-Minute Exercise</button>
        </div>
      </div>
      <button class="btn btn-secondary" onclick="showScreen('screen-kid-home')">Back</button>
    </div>
    <div class="bottom-nav">
      <div class="nav-item" onclick="showScreen('screen-kid-home')">Home</div>
      <div class="nav-item" onclick="showScreen('screen-kid-tutor')">Learn</div>
      <div class="nav-item active" onclick="showScreen('screen-kid-wellbeing')">Wellbeing</div>
      <div class="nav-item" onclick="showScreen('screen-kid-gap')">Progress</div>
    </div>
  </div>

  <!-- 11. Breathing Exercise -->
  <div id="screen-kid-breathing" class="screen">
    <div class="screen-title">üå∏ Breathing Exercise</div>
    <div class="content-area" style="display:flex;flex-direction:column;align-items:center;justify-content:center;">
      <div style="width:180px;height:180px;border-radius:50%;border:4px solid #667eea;background:#edf2f7;display:flex;align-items:center;justify-content:center;font-size:24px;color:#4a5568;text-align:center; margin-bottom:20px;">
        Breathe in...<br>Breathe out...
      </div>
      <div style="font-size:16px;font-weight:bold;color:#2d3748;margin-bottom:10px;text-align:center;">
        Let's relax for 2 minutes!
      </div>
      <button class="btn" id="btn-breathing-done" style="background:#48bb78;font-size:14px;">Done</button>
    </div>
  </div>

</div>
<script>
  // NAVIGATION
  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    // Floating avatar logic
    const avatarScreens = ['screen-kid-home','screen-kid-gap','screen-kid-tutor'];
    document.querySelectorAll('.floating-avatar').forEach(el => el.classList.add('hide'));
    if (avatarScreens.includes(id)) {
      let aid = 'floating-avatar';
      if(id==='screen-kid-gap') aid='floating-avatar-gap';
      else if(id==='screen-kid-tutor') aid='floating-avatar-tutor';
      let av = document.getElementById(aid);
      if(av) av.classList.remove('hide');
    }
    if (id==="screen-kid-spelling") startHangman();
    if (id==="screen-geography-flags") setupFlagMatch();
  }
  document.getElementById('btn-parent').onclick = () => showScreen('screen-parent');
  document.getElementById('btn-kid').onclick = () => showScreen('screen-kid-welcome');
  document.getElementById('btn-to-onboarding').onclick = () => showScreen('screen-kid-onboarding');
  let kidName = '';
  let chosenAvatar = 'Hero';
  let chosenAvatarEmoji = 'ü¶∏‚Äç‚ôÄÔ∏è';
  const avatarEmojis = {
    "Hero": "ü¶∏‚Äç‚ôÄÔ∏è", "Kitty": "üê±", "Space": "üöÄ", "Rainbow": "üåà", "Unicorn": "ü¶Ñ", "Dragon": "üêâ"
  };
  document.getElementById('btn-next-onboarding').onclick = function() {
    kidName = document.getElementById('input-name').value.trim();
    const grade = document.getElementById('input-grade').value;
    if (!kidName) { alert('Please enter your name!'); document.getElementById('input-name').focus(); return; }
    if (!grade) { alert('Please select your grade!'); document.getElementById('input-grade').focus(); return; }
    showScreen('screen-kid-avatar');
  };
  const avatarOptions = document.querySelectorAll('#avatar-grid .avatar-option');
  avatarOptions.forEach(option => {
    option.onclick = function() {
      avatarOptions.forEach(o => o.classList.remove('selected'));
      this.classList.add('selected');
      const name = this.querySelector('.avatar-name').textContent;
      document.getElementById('avatar-emoji').textContent = avatarEmojis[name];
      document.getElementById('avatar-label').textContent = `You chose ${name}!`;
      chosenAvatar = name;
      chosenAvatarEmoji = avatarEmojis[name];
      document.querySelectorAll('.floating-avatar').forEach(el=>el.textContent=chosenAvatarEmoji);
    }
  });
  document.getElementById('btn-avatar-next').onclick = function() {
    document.querySelectorAll('.floating-avatar').forEach(el=>el.textContent=chosenAvatarEmoji);
    showScreen('screen-kid-home');
  };
  document.getElementById('btn-assessment').onclick = function() {
    showScreen('screen-kid-gap');
  };
  document.getElementById('btn-start-learning-path').onclick = function() {
    showScreen('screen-kid-tutor');
  };
  document.getElementById('btn-breathe-from-tutor').onclick = function() {
    showScreen('screen-kid-breathing');
  };
  document.getElementById('btn-breathing-done').onclick = function() {
    showScreen('screen-kid-wellbeing');
  };
  document.getElementById('btn-breathing-break').onclick = function() {
    showScreen('screen-kid-breathing');
  };
  document.getElementById('btn-upload-parent').onclick = function() {
    showScreen('screen-parent-upload');
  };
  document.querySelectorAll('.subject-btn').forEach(btn => {
    btn.onclick = function() {
      const subject = btn.dataset.subject;
      if(subject === 'spelling') showScreen('screen-kid-spelling');
      else if(subject === 'wellbeing') showScreen('screen-kid-wellbeing');
      else if(subject === 'geography') showScreen('screen-geography-flags');
      else showScreen('screen-kid-tutor');
    };
  });
  document.querySelectorAll('.floating-avatar').forEach(el => {
    el.onclick = () => showScreen('screen-kid-wellbeing');
  });
  document.querySelectorAll('.mood-option').forEach(btn=>{
    btn.onclick = function() {
      btn.parentElement.querySelectorAll('.mood-option').forEach(opt=>opt.classList.remove('selected'));
      btn.classList.add('selected');
    }
  });

  // HANGMAN GAME: word is SPELLING, reveal S and L at start
  const hangmanWord = "SPELLING";
  let hangmanState = {};
  function startHangman() {
    let arr = [];
    for(let i=0;i<hangmanWord.length;i++){
      if(hangmanWord[i]==='S'||hangmanWord[i]==='L') arr[i]=hangmanWord[i];
      else arr[i]="_";
    }
    hangmanState = {
      word: hangmanWord,
      progress: arr,
      guessed: ['S','L'],
      wrong: [],
      maxWrong: 6,
      gameover: false
    };
    renderHangman();
  }
  function guessHangmanLetter(letter) {
    if(hangmanState.gameover) return;
    letter = letter.toUpperCase();
    if(hangmanState.guessed.includes(letter)) return;
    hangmanState.guessed.push(letter);
    if(hangmanState.word.includes(letter)) {
      for(let i=0;i<hangmanState.word.length;i++) {
        if(hangmanState.word[i] === letter) hangmanState.progress[i] = letter;
      }
    } else {
      hangmanState.wrong.push(letter);
    }
    if(hangmanState.progress.join('') === hangmanState.word) {
      hangmanState.gameover = true;
      setTimeout(()=>{document.getElementById('hangman-message').textContent = "üéâ You won! The word was SPELLING";}, 180);
    } else if(hangmanState.wrong.length >= hangmanState.maxWrong) {
      hangmanState.gameover = true;
      setTimeout(()=>{document.getElementById('hangman-message').textContent = "üò¢ Game Over! The word was SPELLING";}, 180);
    }
    renderHangman();
  }
  function renderHangman() {
    const stages = [
      `\n _______\n |     |\n |     \n |    \n |    \n_|_`,
      `\n _______\n |     |\n |     O\n |    \n |    \n_|_`,
      `\n _______\n |     |\n |     O\n |     |\n |    \n_|_`,
      `\n _______\n |     |\n |     O\n |    /|\n |    \n_|_`,
      `\n _______\n |     |\n |     O\n |    /|\\\n |    \n_|_`,
      `\n _______\n |     |\n |     O\n |    /|\\\n |    / \n_|_`,
      `\n _______\n |     |\n |     O\n |    /|\\\n |    / \\\n_|_`
    ];
    document.getElementById('hangman-visual').innerHTML = `<pre>${stages[hangmanState.wrong.length]}</pre>`;
    document.getElementById('hangman-word').textContent = hangmanState.progress.join(" ");
    let alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let letterBtns = "";
    for(let letter of alphabet) {
      let disabled = (hangmanState.guessed.includes(letter)||hangmanState.gameover) ? "disabled" : "";
      if(letter==='S'||letter==='L') disabled="disabled";
      letterBtns += `<button class="btn btn-secondary" style="width:30px;margin:2px 2px 4px 2px;padding:3px 0;font-size:15px;" onclick="guessHangmanLetter('${letter}')" ${disabled}>${letter}</button>`;
    }
    document.getElementById('hangman-letters').innerHTML = letterBtns;
    if(!hangmanState.gameover) {
      document.getElementById('hangman-message').textContent = hangmanState.wrong.length>0?"Wrong guesses: "+hangmanState.wrong.join(" "):"";
    }
  }
  window.guessHangmanLetter = guessHangmanLetter;
  window.startHangman = startHangman;

  // Geography Flags Matching Mini-Game
  let flagData = [
    {flag:'üá´üá∑', country:'France'},
    {flag:'üáßüá∑', country:'Brazil'},
    {flag:'üáØüáµ', country:'Japan'},
    {flag:'üá¶üá∫', country:'Australia'}
  ];
  let shuffledFlags = [];
  let shuffledCountries = [];
  let flagSelections = [null,null,null,null];
  let countrySelections = [null,null,null,null];
  let currentFlagIndex = null;
  let matched = [null,null,null,null];

  function shuffle(arr) {
    let a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }
  function setupFlagMatch() {
    shuffledFlags = shuffle(flagData);
    shuffledCountries = shuffle(flagData);
    flagSelections = [null,null,null,null];
    countrySelections = [null,null,null,null];
    matched = [null,null,null,null];
    currentFlagIndex = null;
    renderFlagMatch();
    document.getElementById('flag-match-result').textContent = '';
  }
  function renderFlagMatch() {
    let flagRow = document.getElementById('flag-row');
    let countryRow = document.getElementById('country-row');
    flagRow.innerHTML = '';
    countryRow.innerHTML = '';
    for(let i=0;i<shuffledFlags.length;i++) {
      let btn = document.createElement('button');
      btn.className = 'flag-btn' + (currentFlagIndex === i ? ' selected':'') + (matched[i] !== null ? ' disabled':'');
      btn.disabled = matched[i] !== null;
      btn.textContent = shuffledFlags[i].flag;
      btn.onclick = function() {
        currentFlagIndex = i;
        renderFlagMatch();
      };
      flagRow.appendChild(btn);
    }
    for(let i=0;i<shuffledCountries.length;i++) {
      let btn = document.createElement('button');
      btn.className = 'country-btn' + (matched.includes(i) ? ' disabled' : '') + (currentFlagIndex!==null && countrySelections[currentFlagIndex]===i ? ' selected' : '');
      btn.disabled = matched.includes(i);
      btn.textContent = shuffledCountries[i].country;
      btn.onclick = function() {
        if(currentFlagIndex !== null && !matched[currentFlagIndex] && !matched.includes(i)) {
          countrySelections[currentFlagIndex] = i;
          // Each flag can have one selection
          renderFlagMatch();
        }
      };
      countryRow.appendChild(btn);
    }
  }
  document.getElementById('btn-submit-flags').onclick = function() {
    let correct = 0, total = flagData.length;
    for(let i=0;i<flagData.length;i++) {
      let idxFlag = shuffledFlags[i].country;
      let idxCountry = shuffledCountries[countrySelections[i]] && shuffledCountries[countrySelections[i]].country;
      if(idxCountry && idxFlag === idxCountry) {
        matched[i] = countrySelections[i];
        correct++;
      }
    }
    renderFlagMatch();
    if(correct === total) {
      document.getElementById('flag-match-result').textContent = "üéâ Great job! All matched correctly!";
    } else {
      document.getElementById('flag-match-result').textContent = "Matched "+correct+" of "+total+". Try to match all!";
    }
  };
</script>
</body>
</html>
